<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<VBox spacing="15" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.upn.gestion.controller.VistaLibrosController">

    <HBox fx:id="panelHeader" alignment="CENTER_LEFT" spacing="10">
        <Label style="-fx-font-size: 24px;" styleClass="titulo-login" text="CatÃ¡logo de Libros" />
        <Region HBox.hgrow="ALWAYS" />
        <Button onAction="#mostrarVistaRegistroLibro" styleClass="boton-ingresar" text="âž• Registrar" />
        <Button layoutX="482.0" layoutY="15.0" onAction="#cargarLibros" styleClass="boton-ingresar" text="ðŸ”„ Refrescar" />
    </HBox>

    <TableView fx:id="tablaLibros" style="-fx-base: #ffffff; -fx-font-size: 14px;" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="colId" prefWidth="50" text="ID" />
            <TableColumn fx:id="colTitulo" prefWidth="300" text="TÃ­tulo" />
            <TableColumn fx:id="colIsbn" prefWidth="120" text="ISBN" />
            <TableColumn fx:id="colStock" prefWidth="80" text="Stock" />
        </columns>
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
    </TableView>

    <!-- FORMULARIO REGISTRO LIBRO (OCULTO AL INICIO) -->
    <VBox fx:id="panelRegistro" managed="false" spacing="10" style="-fx-background-color: white; -fx-padding: 15; -fx-background-radius: 8;" visible="false">
        <Label prefHeight="27.0" prefWidth="293.0" style="-fx-font-size: 18px; -fx-font-weight: bold;" text="Registrar nuevo libro" />
        <Separator />

        <GridPane hgap="10" vgap="10">
            <columnConstraints>        
                <ColumnConstraints halignment="RIGHT" minWidth="100" />
                <ColumnConstraints minWidth="250" />
            </columnConstraints>

            <!-- TÃ­tulo -->
            <Label text="TÃ­tulo:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
            <TextField fx:id="txtTitulo" promptText="Ingrese tÃ­tulo"
                    GridPane.columnIndex="1" GridPane.rowIndex="0" />

            <!-- ISBN -->
            <Label text="ISBN:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
            <TextField fx:id="txtIsbn" promptText="Ingrese ISBN"
                    GridPane.columnIndex="1" GridPane.rowIndex="1" />

            <!-- Stock -->
            <Label text="Stock:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
            <TextField fx:id="txtStock" promptText="Ingrese stock"
                    GridPane.columnIndex="1" GridPane.rowIndex="2" />

            <!-- Autor -->
            <Label text="Autor:" GridPane.columnIndex="0" GridPane.rowIndex="3" />
            <HBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="3">
                <ComboBox fx:id="cmbAutor" prefWidth="200.0"/>
                <Button text="+" onAction="#nuevoAutorRapido" prefWidth="30.0"/>
            </HBox>

            <!-- CategorÃ­a -->
            <Label text="CategorÃ­a:" GridPane.columnIndex="0" GridPane.rowIndex="4" />
            <HBox spacing="5" GridPane.columnIndex="1" GridPane.rowIndex="4">
                <ComboBox fx:id="cmbCategoria" prefWidth="200.0"/>
                <Button text="+" onAction="#nuevaCategoriaRapida" prefWidth="30.0"/>
            </HBox>

            <rowConstraints>
                <RowConstraints/>
                <RowConstraints/>
                <RowConstraints/>
                <RowConstraints/>
                <RowConstraints/>
            </rowConstraints>
        </GridPane>

        <HBox spacing="10">
            <Button onAction="#guardarLibro" prefHeight="40.0" prefWidth="200.0" styleClass="boton-ingresar" text="ðŸ’¾ Guardar" />                
            <Button onAction="#volverACatalogo" prefHeight="40.0" prefWidth="220.0" styleClass="boton-ingresar" text="â¬… Volver" wrapText="true" />            
        </HBox>

        <Label fx:id="lblMensajeRegistro" style="-fx-font-size: 13px;" />
    </VBox>

</VBox>
