<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<VBox spacing="15" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.upn.gestion.controller.VistaLibrosController">

    <HBox fx:id="panelHeader" alignment="CENTER_LEFT" spacing="10">
        <Label style="-fx-font-size: 24px;" styleClass="titulo-login" text="CatÃ¡logo de Libros" />
        <Region HBox.hgrow="ALWAYS" />

        <TextField fx:id="txtBuscar" promptText="ðŸ” Buscar..." prefWidth="200" styleClass="text-field-modern"/>

        <Button onAction="#mostrarVistaRegistroLibro" styleClass="boton-secundario" text="âž• Nuevo" />
        <Button onAction="#editarLibroAction" styleClass="boton-ingresar" text="âœ Editar" />
        <Button onAction="#eliminarLibro" styleClass="boton-peligro" text="ðŸ—‘ Eliminar" />
        <Button onAction="#cargarLibros" styleClass="boton-secundario" text="ðŸ”„" />
    </HBox>

    <TableView fx:id="tablaLibros" style="-fx-base: #ffffff; -fx-font-size: 14px;" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="colId" prefWidth="50" text="ID" />
            <TableColumn fx:id="colTitulo" prefWidth="300" text="TÃ­tulo" />
            <TableColumn fx:id="colIsbn" prefWidth="120" text="ISBN" />
            <TableColumn fx:id="colStock" prefWidth="80" text="Stock" />
        </columns>
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
        </columnResizePolicy>
    </TableView>

    <VBox fx:id="panelRegistro" managed="false" visible="false" spacing="20"
          styleClass="formulario-card" maxWidth="600" alignment="TOP_CENTER">

        <Label fx:id="lblTituloFormulario" text="Registrar Nuevo Libro" styleClass="titulo-formulario" maxWidth="Infinity"/>

        <GridPane hgap="15" vgap="15">
            <columnConstraints>
                <ColumnConstraints halignment="RIGHT" minWidth="100" />
                <ColumnConstraints hgrow="ALWAYS" />
            </columnConstraints>

            <Label styleClass="label-campo" text="TÃ­tulo:" GridPane.rowIndex="0" />
            <TextField fx:id="txtTitulo" promptText="Ingrese tÃ­tulo" styleClass="text-field-modern" GridPane.columnIndex="1" GridPane.rowIndex="0" />

            <Label styleClass="label-campo" text="ISBN:" GridPane.rowIndex="1" />
            <TextField fx:id="txtIsbn" promptText="Ingrese ISBN" styleClass="text-field-modern" GridPane.columnIndex="1" GridPane.rowIndex="1" />

            <Label styleClass="label-campo" text="Stock:" GridPane.rowIndex="2" />
            <TextField fx:id="txtStock" promptText="Ingrese stock" styleClass="text-field-modern" GridPane.columnIndex="1" GridPane.rowIndex="2" />

            <Label styleClass="label-campo" text="Autor:" GridPane.rowIndex="3" />
            <HBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="3" alignment="CENTER_LEFT">
                <ComboBox fx:id="cmbAutor" promptText="Seleccione Autor" maxWidth="Infinity" HBox.hgrow="ALWAYS" styleClass="text-field-modern"/>
                <Button text="âž•" onAction="#nuevoAutorRapido" styleClass="btn-mini"/>
            </HBox>

            <Label styleClass="label-campo" text="CategorÃ­a:" GridPane.rowIndex="4" />
            <HBox spacing="10" GridPane.columnIndex="1" GridPane.rowIndex="4" alignment="CENTER_LEFT">
                <ComboBox fx:id="cmbCategoria" promptText="Seleccione CategorÃ­a" maxWidth="Infinity" HBox.hgrow="ALWAYS" styleClass="text-field-modern"/>
                <Button text="âž•" onAction="#nuevaCategoriaRapida" styleClass="btn-mini"/>
            </HBox>

            <rowConstraints>
                <RowConstraints />
                <RowConstraints />
                <RowConstraints />
                <RowConstraints />
                <RowConstraints />
            </rowConstraints>
        </GridPane>

        <Region prefHeight="10"/>

        <HBox spacing="20" alignment="CENTER">
            <Button fx:id="btnGuardar" onAction="#guardarLibro" text="ðŸ’¾ Guardar" styleClass="btn-guardar" prefWidth="200" />
            <Button onAction="#volverACatalogo" text="â¬… Cancelar" styleClass="btn-volver" prefWidth="150" />
        </HBox>

        <Label fx:id="lblMensajeRegistro" style="-fx-font-weight: bold;" />
    </VBox>

</VBox>